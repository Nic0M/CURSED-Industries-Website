/*

 Copyright The Closure Library Authors.
 Copyright The Closure Compiler Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};
$jscomp.getGlobal=function(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(a,b,d){if(!d||null!=a){d=$jscomp.propertyToPolyfillSymbol[b];if(null==d)return a[b];d=a[d];return void 0!==d?d:a[b]}};$jscomp.polyfill=function(a,b,d,c){b&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(a,b,d,c):$jscomp.polyfillUnisolated(a,b,d,c))};
$jscomp.polyfillUnisolated=function(a,b,d,c){d=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))return;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&null!=b&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:b})};
$jscomp.polyfillIsolated=function(a,b,d,c){var e=a.split(".");a=1===e.length;c=e[0];c=!a&&c in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var g=0;g<e.length-1;g++){var f=e[g];if(!(f in c))return;c=c[f]}e=e[e.length-1];d=$jscomp.IS_SYMBOL_NATIVE&&"es6"===d?c[e]:null;b=b(d);null!=b&&(a?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:b}):b!==d&&(void 0===$jscomp.propertyToPolyfillSymbol[e]&&(d=1E9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?
$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+d+"$"+e),$jscomp.defineProperty(c,$jscomp.propertyToPolyfillSymbol[e],{configurable:!0,writable:!0,value:b})))};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(d){}return!1};
$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.makeIterator=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if("number"==typeof a.length)return $jscomp.arrayIterator(a);throw Error(String(a)+" is not an iterable or ArrayLike");};$jscomp.generator={};$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};
$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};
$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};
$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,b){this.nextAddress=b;return{value:a}};$jscomp.generator.Context.prototype.yieldAll=function(a,b){a=$jscomp.makeIterator(a);var d=a.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=b;else return this.yieldAllIterator_=a,this.yield(d.value,b)};
$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,b){this.catchAddress_=a;void 0!=b&&(this.finallyAddress_=b)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,b){this.nextAddress=a;this.catchAddress_=b||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,b,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=b||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,b){b=this.finallyContexts_.splice(b||0)[0];if(b=this.abruptCompletion_=this.abruptCompletion_||b){if(b.isException)return this.jumpToErrorHandler_();void 0!=b.jumpTo&&this.finallyAddress_<b.jumpTo?(this.nextAddress=b.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var b in a)this.properties_.push(b);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var b=this.context_.yieldAllIterator_;if(b)return this.yieldAllStep_("return"in b?b["return"]:function(d){return{value:d,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,b,d){try{var c=a.call(this.context_.yieldAllIterator_,b);$jscomp.generator.ensureIteratorResultIsObject_(c);if(!c.done)return this.context_.stop_(),c;var e=c.value}catch(g){return this.context_.yieldAllIterator_=null,this.context_.throw_(g),this.nextStep_()}this.context_.yieldAllIterator_=null;d.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(b){this.context_.yieldResult=void 0,this.context_.throw_(b)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(b){return a.next_(b)};this.throw=function(b){return a.throw_(b)};this.return=function(b){return a.return_(b)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,b){b=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b));$jscomp.setPrototypeOf&&a.prototype&&$jscomp.setPrototypeOf(b,a.prototype);return b};
$jscomp.asyncExecutePromiseGenerator=function(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function g(f){f.done?c(f.value):Promise.resolve(f.value).then(b,d).then(g,e)}g(a.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(a){return $jscomp.asyncExecutePromiseGenerator(a())};$jscomp.asyncExecutePromiseGeneratorProgram=function(a){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a)))};
$jscomp.polyfill("globalThis",function(a){return a||$jscomp.global},"es_2020","es3");$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(0>d&&(d=Math.max(d+e,0));d<e;d++){var g=c[d];if(g===b||Object.is(g,b))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};$jscomp.stringPadding=function(a,b){a=void 0!==a?String(a):" ";return 0<b&&a?a.repeat(Math.ceil(b/a.length)).substring(0,b):""};
$jscomp.polyfill("String.prototype.padStart",function(a){return a?a:function(b,d){var c=$jscomp.checkStringArgs(this,null,"padStart");return $jscomp.stringPadding(d,b-c.length)+c}},"es8","es3");var COMPILED=!0,goog=goog||{};
goog.exportPath_=function(a,b,d,c){a=a.split(".");c=c||globalThis;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)if(a.length||void 0===b)c=c[e]&&c[e]!==Object.prototype[e]?c[e]:c[e]={};else if(!d&&goog.isObject_(b)&&goog.isObject_(c[e]))for(var g in b)b.hasOwnProperty(g)&&(c[e][g]=b[g]);else c[e]=b};
goog.define=function(a,b){if(!COMPILED){var d=globalThis.CLOSURE_DEFINES;d&&void 0===d.nodeType&&Object.prototype.hasOwnProperty.call(d,a)&&(b=d[a])}return b};goog.FEATURESET_YEAR=2012;goog.DEBUG=!0;goog.LOCALE="en";goog.provide=function(a){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};
goog.constructNamespace_=function(a,b,d){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName_(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a,b,d)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if("string"!==typeof a||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");
goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};goog.module.getInternal_=function(a){if(!COMPILED){if(a in goog.loadedModules_)return goog.loadedModules_[a];if(!goog.implicitNamespaces_[a])return a=goog.getObjectByName_(a),null!=a?a:null}return null};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return!!goog.moduleLoaderState_};
goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};goog.forwardDeclare=function(a){};
COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&null!=goog.getObjectByName_(a)},goog.implicitNamespaces_={"goog.module":!0});goog.getObjectByName_=function(a,b){a=a.split(".");b=b||globalThis;for(var d=0;d<a.length;d++)if(b=b[a[d]],null==b)return null;return b};goog.require=function(a){if(!COMPILED)return goog.isProvided_(a)?goog.module.getInternal_(a):null};goog.requireType=function(a){return{}};goog.SEAL_MODULE_EXPORTS=goog.DEBUG;
goog.loadedModules_={};
goog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1};var d={},c=d;if("function"===typeof a)c=a.call(void 0,c);else throw Error("Invalid module definition");var e=goog.moduleLoaderState_.moduleName;if("string"===typeof e&&e)goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(e,c,d!==c):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof c&&null!=c&&Object.seal(c),goog.loadedModules_[e]=c;else throw Error('Invalid module name "'+
e+'"');}finally{goog.moduleLoaderState_=b}};goog.isObject_=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};
goog.getCssName=function(a,b){if("."==String(a).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+a);var d=function(e){return goog.cssNameMapping_[e]||e},c=function(e){e=e.split("-");for(var g=[],f=0;f<e.length;f++)g.push(d(e[f]));return g.join("-")};c=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?d:c:function(e){return e};a=b?a+"-"+c(b):c(a);return globalThis.CLOSURE_CSS_NAME_MAP_FN?globalThis.CLOSURE_CSS_NAME_MAP_FN(a):a};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};!COMPILED&&globalThis.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=globalThis.CLOSURE_CSS_NAME_MAPPING);goog.GetMsgOptions=function(){};
goog.getMsg=function(a,b,d){d&&d.html&&(a=a.replace(/</g,"&lt;"));d&&d.unescapeHtmlEntities&&(a=a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&"));b&&(a=a.replace(/\{\$([^}]+)}/g,function(c,e){return null!=b&&e in b?b[e]:c}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,d){goog.exportPath_(a,b,!0,d)};goog.exportProperty=function(a,b,d){a[b]=d};goog.reflect={};goog.reflect.object=function(a,b){return b};
goog.reflect.objectProperty=function(a,b){return a};goog.reflect.sinkValue=function(a){goog.reflect.sinkValue[" "](a);return a};goog.reflect.sinkValue[" "]=function(){};var module$exports$custom_table_search={};function module$contents$custom_table_search_calc_lcs(a,b){const d=a.length,c=b.length;let e=Array(d+1);for(var g=0;g<d+1;g++)e[g]=Array(c+1);for(g=0;g<d+1;g++)for(let f=0;f<c+1;f++)e[g][f]=0===g||0===f?0:a[g-1]===b[f-1]?1+e[g-1][f-1]:Math.max(e[g-1][f],e[g][f-1]);return e[d][c]}
function module$contents$custom_table_search_search_table(a,b,d,c=!1){var e=document.getElementById(a);if(e)if(a=document.getElementById(b))if(b=e.value,""===b)for(d=a.getElementsByTagName("tr"),c=1;c<d.length;c++)d[c].style.display="";else if(c||(b=b.toLowerCase()),e=a.getElementsByTagName("tr"),1>e.length)console.error("Table has no header row");else{a=e[0];for(let g=1;g<e.length;g++){const f=e[g].getElementsByTagName("td");let k=!1;for(let m=0;m<d.length;m++){if(m>=a.cells.length){console.error(`Column index ${d[m]} out of range`);
continue}let h=f[d[m]].innerText;switch(a.cells[d[m]].innerText){case "Unique ID":c||(h=h.toLowerCase());let l=module$contents$custom_table_search_calc_lcs(b,h);3>Math.abs(l-b.length)?(k=!0,console.log(`Match found: ${b} and ${h}`)):console.log(`No match: ${b} and ${h}`);break;default:c||(h=h.toLowerCase()),h.includes(b)&&(console.log(`Default match found: ${b} and ${h}`),k=!0)}if(k){e[g].style.display="";break}}k||(e[g].style.display="none")}}else console.error(`No table with id ${b}`);else console.error(`No search bar with id ${a}`)}
module$exports$custom_table_search.search_table=module$contents$custom_table_search_search_table;var module$exports$database_tables={};function module$contents$database_tables_format_speed(a){return a+" m/s"}function module$contents$database_tables_format_altitude(a){return null===a?"Unknown":a+" m"}function module$contents$database_tables_format_heading(a){return 90>a?a+"\u00b0 NE":180>a?a+"\u00b0 SE":270>a?a+"\u00b0 SW":360>a?a+"\u00b0 NW":a+"\u00b0"}function module$contents$database_tables_format_latitude(a){a=parseFloat(a);return 0>a?(-a).toFixed(6)+"\u00b0 S":a.toFixed(6)+"\u00b0 N"}
function module$contents$database_tables_format_longitude(a){a=parseFloat(a);return 0>a?(-a).toFixed(6)+"\u00b0 W":a.toFixed(6)+"\u00b0 E"}function module$contents$database_tables_format_timestamp(a){"string"!==typeof a||a.endsWith("Z")||(a+="Z");return(new Date(a)).toLocaleString("en-US",{timeZone:"America/Denver",timeZoneName:"short"})}
function module$contents$database_tables_format_duration(a){return 60>a?a+(1===a?" second":" seconds"):3600>a?Math.floor(a/60)+(1===Math.floor(a/60)?" minute ":" minutes ")+module$contents$database_tables_format_duration(a%60):86400>a?Math.floor(a/3600)+(1===Math.floor(a/3600)?" hour ":" hours ")+module$contents$database_tables_format_duration(a%3600):Math.floor(a/86400)+(1===Math.floor(a/86400)?" day ":" days ")+module$contents$database_tables_format_duration(a%86400)}
function module$contents$database_tables_updateDateStr(a,b){b=document.getElementsByClassName(b);if(0===b.length)console.log("No last refreshed elements found. Cannot update last refreshed time.");else{a*=1E3;var d=(Date.now()-a)/1E3,c="Last refreshed: ";60>d?(c+=Math.floor(d).toString(),c=1!==d?c+" seconds ago":c+" second ago"):3600>d?(d=Math.floor(d/60),c+=d.toString(),c=1!==d?c+" minutes ago":c+" minute ago"):86400>d?(d=Math.floor(d/3600),c+=d.toString(),c=1!==d?c+" hours ago":c+" hour ago"):(d=
Math.floor(d/86400),c+=d.toString(),c=1!==d?c+" days ago":c+" day ago");a=(new Date(a)).toLocaleString("en-US",{timeZone:"America/Denver",timeZoneName:"short"});c+=" at "+a;for(a=0;a<b.length;a++)b[a].innerText=c}}function module$contents$database_tables_convert2urlsafe(a){return a.replace(/:/g,"%3A").replace(/,/g,"%2C").replace(/ /g,"%20")}
function module$contents$database_tables_createSearchBar(a,b){const d=document.getElementById(a);if(d){d.innerHTML="";a=document.createElement("input");var c=b+"-search-bar";a.setAttribute("id",c);a.setAttribute("placeholder","Search by unique ID, flight date, or location...");a.setAttribute("style","width: 50%;");a.setAttribute("class","form-control");a.addEventListener("input",function(){module$contents$custom_table_search_search_table(c,b,[0],!1)});return a}console.log("Search bar div does not exist:",
a);console.log("Cannot create search bar.")}function module$contents$database_tables_searchTable(a,b){a=document.getElementById(a).value.toLowerCase();b=document.getElementById(b).getElementsByTagName("tr");for(let d=1;d<b.length;d++){const c=b[d].getElementsByTagName("td");let e=!1;for(let g=0;g<c.length;g++)if(c[g].innerText.toLowerCase().includes(a)){e=!0;break}b[d].style.display=e?"":"none"}}
function module$contents$database_tables_getActiveFlights(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(null===document.getElementById("active-flights-table"))console.log("active-flights-table div does not exist on this page.");else try{const f=yield fetch("https://cursedindustries.com/wp-json/drones/v1/active-flights"),k=yield f.json();console.log(k);const m=document.getElementById("active-flights-table");m.innerHTML="";m.setAttribute("style","overflow-x: scroll;");if(200!==
f.status)m.innerHTML="Error: Could not fetch list of active flights. Please try again later.";else{var a=document.createElement("div");a.setAttribute("id","active-flights-search-bar-div");m.appendChild(a);var b=module$contents$database_tables_createSearchBar("active-flights-search-bar-div","active-flights-table");a.appendChild(b);var d=document.createElement("p");d.setAttribute("class","active-flights-last-refreshed-text");m.appendChild(d);module$contents$database_tables_updateDateStr(k.current_time,
"active-flights-last-refreshed-text");var c=document.createElement("table"),e=c.createTHead();c.setAttribute("class","table table-striped");var g=e.insertRow();g.setAttribute("style","background-color: #00aa00; color: black;");g.insertCell().innerHTML="Unique ID";g.insertCell().innerHTML="Latitude";g.insertCell().innerHTML="Longitude";g.insertCell().innerHTML="Altitude";g.insertCell().innerHTML="Ground Speed";g.insertCell().innerHTML="Vertical Speed";g.insertCell().innerHTML="Heading";g.insertCell().innerHTML=
"Last Updated";k.flights.forEach(h=>{const l=c.insertRow();l.insertCell().innerHTML=h.unique_id;l.insertCell().innerHTML=module$contents$database_tables_format_latitude(h.lat);l.insertCell().innerHTML=module$contents$database_tables_format_longitude(h.lon);l.insertCell().innerHTML=module$contents$database_tables_format_altitude(h.alt);l.insertCell().innerHTML=module$contents$database_tables_format_speed(h.gnd_speed);l.insertCell().innerHTML=module$contents$database_tables_format_speed(h.vert_speed);
l.insertCell().innerHTML=module$contents$database_tables_format_heading(h.heading);l.insertCell().innerHTML=module$contents$database_tables_format_timestamp(h.timestamp)});m.appendChild(c);0!==module$contents$database_tables_active_flights_refresh_time_text_interval_id&&clearInterval(module$contents$database_tables_active_flights_refresh_time_text_interval_id);module$contents$database_tables_active_flights_refresh_time_text_interval_id=setInterval(()=>module$contents$database_tables_updateDateStr(k.current_time,
"active-flights-last-refreshed-text"),module$contents$database_tables_refresh_text_interval_time)}}catch(f){console.log("Error:",f)}})}
function module$contents$database_tables_getRecentFlights(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){let a=document.getElementById("recent-flights-table");if(null===a)console.log("recent-flights-table div does not exist on this page.");else try{const e=yield fetch("https://cursedindustries.com/wp-json/drones/v1/recent-flights",{method:"GET",headers:{"Content-Type":"application/json"}});let g=null;try{g=yield e.json()}catch(f){console.log("Response could not be parsed as JSON:",
f)}if(200!==e.status)console.log("Error fetching data:",g);else{a.innerHTML="";var b=document.createElement("table");b.setAttribute("class","table recent-flights-table");var d=b.createTHead().insertRow();d.setAttribute("style","background-color: #aaaaff; color: black;");d.insertCell().innerHTML="UAS ID";d.insertCell().innerHTML="Start Time";d.insertCell().innerHTML="End Time";var c=b.createTBody();g.flights.forEach(f=>{var k=c.insertRow();let m=k.insertCell(),h=k.insertCell(),l=k.insertCell();null===
f.end_time?(l.innerHTML="N/A",k="\ud83d\udd34 ".concat(f.uas_id)):(k=f.uas_id,l.innerHTML=f.end_time);h.innerHTML=f.start_time;k="<a href='/flight-information?flight_num="+f.flight_num+"'>"+k+"</a>";m.innerHTML=k});a.appendChild(b)}}catch(e){console.log("Error:",e)}})}
function module$contents$database_tables_getHistoricalFlights(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(null===document.getElementById("historical-flights-table"))console.log("historical-flights-table div does not exist on this page.");else try{const m=yield fetch("https://cursedindustries.com/wp-json/drones/v1/historical-flights",{method:"GET",headers:{"Content-Type":"application/json"}}),h=yield m.json();if(200!==m.status)console.log("Error:",h);else{var a=document.getElementById("historical-flights-table");
a.innerHTML="";a.setAttribute("style","overflow-x: scroll;");var b=document.createElement("div");b.setAttribute("id","historical-flights-search-bar-div");a.appendChild(b);var d=module$contents$database_tables_createSearchBar("historical-flights-search-bar-div","historical-flights-table");b.appendChild(d);var c=document.createElement("p");c.setAttribute("class","historical-flights-last-refreshed-text");a.appendChild(c,"historical-flights-last-refreshed-text");var e=NaN;void 0!==h.current_time?e=h.current_time:
(console.log("Current time could not be parsed from the response. Displaying NaN as last refreshed time."),e=NaN);module$contents$database_tables_updateDateStr(e,"historical-flights-last-refreshed-text");0!==module$contents$database_tables_historical_flights_refresh_time_text_interval_id&&clearInterval(module$contents$database_tables_historical_flights_refresh_time_text_interval_id);module$contents$database_tables_historical_flights_refresh_time_text_interval_id=setInterval(()=>module$contents$database_tables_updateDateStr(e,
"historical-flights-last-refreshed-text"),module$contents$database_tables_refresh_text_interval_time);var g=document.createElement("table");g.setAttribute("class","table table-striped");var f=g.createTHead().insertRow();f.setAttribute("style","background-color: #00aa00; color: black;");f.insertCell().innerHTML="Unique ID";f.insertCell().innerHTML="Duration";f.insertCell().innerHTML="Start Time";f.insertCell().innerHTML="End Time";f.insertCell().innerHTML="Max Height AGL";f.insertCell().innerHTML=
"Max Speed";var k=g.createTBody();h.flights.forEach(l=>{const n=k.insertRow();let p=n.insertCell(),t="<a href='/flight-information?src_addr="+module$contents$database_tables_convert2urlsafe(l.src_addr)+"&start_time="+module$contents$database_tables_convert2urlsafe(l.start_time)+"'>"+l.unique_id+"</a>";p.innerHTML=t;n.insertCell().innerHTML=module$contents$database_tables_format_duration(l.duration);n.insertCell().innerHTML=l.start_time;n.insertCell().innerHTML=l.end_time;n.insertCell().innerHTML=
module$contents$database_tables_format_altitude(l.max_height_agl);n.insertCell().innerHTML=module$contents$database_tables_format_speed(l.max_gnd_speed)});a.appendChild(g)}}catch(m){console.log("Error:",m)}})}let module$contents$database_tables_current_offset=0;const module$contents$database_tables_limit=50;
function module$contents$database_tables_getRemoteIDPackets(a){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{const h=yield fetch(`https://cursedindustries.com/wp-json/drones/v1/remoteid-packets?offset=${module$contents$database_tables_current_offset}&limit=${module$contents$database_tables_limit}`),l=yield h.json();if(200!==h.status)console.log("Error: Could not fetch list of Remote ID packets. Please try again later."),console.log("Response:",l);else{var b=document.getElementById("remoteid-packets-table");
b.innerHTML="";b.setAttribute("style","");var d=document.createElement("div");d.setAttribute("id","remoteid-packets-search-bar-div");b.appendChild(d);var c=module$contents$database_tables_createSearchBar("remoteid-packets-search-bar-div","remoteid-packets-table");d.appendChild(c);var e=document.createElement("p");e.setAttribute("class","remoteid-packets-last-refreshed-text");b.appendChild(e);var g=NaN;void 0!==l.current_time?g=l.current_time:(console.log("Current time could not be parsed from the response. Displaying NaN as last refreshed time."),
g=NaN);module$contents$database_tables_updateDateStr(g,"remoteid-packets-last-refreshed-text");0!==module$contents$database_tables_remoteid_packets_refresh_time_text_interval_id&&clearInterval(module$contents$database_tables_remoteid_packets_refresh_time_text_interval_id);module$contents$database_tables_remoteid_packets_refresh_time_text_interval_id=setInterval(()=>module$contents$database_tables_updateDateStr(g,"remoteid-packets-last-refreshed-text"),module$contents$database_tables_refresh_text_interval_time);
var f=document.createElement("div");f.setAttribute("style","overflow-x: scroll; overflow-y: scroll; height: 75vh; position: relative;");b.appendChild(f);var k=document.createElement("table"),m=k.createTHead().insertRow();m.setAttribute("style","background-color: #00aa00; color: black; position: sticky; top: 0;");m.insertCell().innerHTML="UAS ID";m.insertCell().innerHTML="Timestamp";m.insertCell().innerHTML="Heading";m.insertCell().innerHTML="Ground Speed";m.insertCell().innerHTML="Vertical Speed";
m.insertCell().innerHTML="Latitude";m.insertCell().innerHTML="Longitude";m.insertCell().innerHTML="Altitude";l.packets.forEach(n=>{const p=k.insertRow();p.insertCell().innerHTML=n.unique_id;p.insertCell().innerHTML=module$contents$database_tables_format_timestamp(n.timestamp);p.insertCell().innerHTML=module$contents$database_tables_format_heading(n.heading);p.insertCell().innerHTML=module$contents$database_tables_format_speed(n.gnd_speed);p.insertCell().innerHTML=module$contents$database_tables_format_speed(n.vert_speed);
p.insertCell().innerHTML=module$contents$database_tables_format_latitude(n.lat);p.insertCell().innerHTML=module$contents$database_tables_format_longitude(n.lon);p.insertCell().innerHTML=module$contents$database_tables_format_altitude(n.geoAlt)});f.appendChild(k)}}catch(h){console.log("Error:",h)}})}
function module$contents$database_tables_getRaspberryPiStatus(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){if(null===document.getElementById("heathchecks-table"))console.log("healthchecks-table div does not exist on this page.");else try{const k=yield fetch("https://cursedindustries.com/wp-json/healthcheck/v1/get_healthchecks"),m=yield k.json();if(200!==k.status)console.log("Error:",m);else{var a=document.getElementById("healthchecks-table");a.innerHTML="";if(void 0===m.healthchecks)console.log("No healthchecks found in response.");
else{var b=m.healthchecks,d=document.createElement("table");d.setAttribute("class","healthchecks-table");d.setAttribute("style","overflow-x: scroll;");var c=d.createTHead().insertRow();c.insertCell().innerHTML="Receiver ID";c.insertCell().innerHTML="Status";c.insertCell().innerHTML="Last Updated";c.insertCell().innerHTML="Received Packets";var e=d.createTBody();b.forEach(h=>{const l=e.insertRow();l.insertCell().innerHTML=h.id;l.insertCell().innerHTML=h.status;l.insertCell().innerHTML=h.updated_at;
l.insertCell().innerHTML=h.received_packets});var g=document.createElement("p");g.setAttribute("class","healthchecks-last-refreshed-text");a.appendChild(g);var f=NaN;void 0!==m.current_time?f=m.current_time:(console.log("Current time could not be parsed from the response. Displaying NaN as last refreshed time."),f=NaN);module$contents$database_tables_updateDateStr(f,"healthchecks-last-refreshed-text");0!==module$contents$database_tables_healthchecks_refresh_time_text_interval_id&&clearInterval(module$contents$database_tables_healthchecks_refresh_time_text_interval_id);
module$contents$database_tables_healthchecks_refresh_time_text_interval_id=setInterval(()=>module$contents$database_tables_updateDateStr(f,"healthchecks-last-refreshed-text"),module$contents$database_tables_refresh_text_interval_time);a.appendChild(g);a.appendChild(d)}}}catch(k){console.log("Error:",k)}})}
let module$contents$database_tables_active_flights_refresh_time_text_interval_id=0,module$contents$database_tables_historical_flights_refresh_time_text_interval_id=0,module$contents$database_tables_remoteid_packets_refresh_time_text_interval_id=0,module$contents$database_tables_healthchecks_refresh_time_text_interval_id=0,module$contents$database_tables_refresh_text_interval_time=450;console.log("Creating active flights table");module$contents$database_tables_getActiveFlights();console.log("Creating historical flights table");
module$contents$database_tables_getHistoricalFlights();console.log("Create Remote ID packets table");module$contents$database_tables_getRemoteIDPackets();console.log("Create Raspberry Pi status table");module$contents$database_tables_getRaspberryPiStatus();console.log("Creating recent flights table");module$contents$database_tables_getRecentFlights();setInterval(module$contents$database_tables_getActiveFlights,3E4);setInterval(module$contents$database_tables_getHistoricalFlights,3E5);
setInterval(module$contents$database_tables_getRemoteIDPackets,3E5);setInterval(module$contents$database_tables_getRaspberryPiStatus,3E5);setInterval(module$contents$database_tables_getRecentFlights,3E4);module$exports$database_tables.format_altitude=module$contents$database_tables_format_altitude;module$exports$database_tables.format_heading=module$contents$database_tables_format_heading;module$exports$database_tables.format_latitude=module$contents$database_tables_format_latitude;
module$exports$database_tables.format_longitude=module$contents$database_tables_format_longitude;module$exports$database_tables.format_speed=module$contents$database_tables_format_speed;module$exports$database_tables.format_timestamp=module$contents$database_tables_format_timestamp;module$exports$database_tables.format_duration=module$contents$database_tables_format_duration;module$exports$database_tables.updateDateStr=module$contents$database_tables_updateDateStr;var module$exports$leaflet_plugins$rotated_marker={};
(function(){var a=L.Marker.prototype._initIcon,b=L.Marker.prototype._setPos,d="msTransform"===L.DomUtil.TRANSFORM;L.Marker.addInitHook(function(){var c=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;c&&(c=c[0]+"px "+c[1]+"px");this.options.rotationOrigin=this.options.rotationOrigin||c||"center bottom";this.options.rotationAngle=this.options.rotationAngle||0;this.on("drag",function(e){e.target._applyRotation()})});L.Marker.include({_initIcon:function(){a.call(this)},
_setPos:function(c){b.call(this,c);this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,this._icon.style[L.DomUtil.TRANSFORM]=d?"rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+(" rotateZ("+this.options.rotationAngle+"deg)"))},setRotationAngle:function(c){this.options.rotationAngle=c;this.update();return this},setRotationOrigin:function(c){this.options.rotationOrigin=
c;this.update();return this}})})();var module$exports$drone_maps={};function module$contents$drone_maps_set_popup_text(a,b){var d;let c=null!=(d=b.uas_id)?d:"Unknown";var e;d=null!=(e=b.speed)?e:"Unknown";var g;e=null!=(g=b.heading)?g:"Unknown";let f;g=null!=(f=b.altitude)?f:"Unknown";let k;b=null!=(k=b.flight_num)?k:0;a.setPopupContent(`UAS ID: <a href="/flight-information?flight=${b}">${c}</a> <br> Speed: ${d} m/s <br> Heading: ${e}\u00b0 <br> Altitude: ${g} m`)}
function module$contents$drone_maps_update_marker(a,b,d){let c=d.lat_lon;b.setLatLng(c);let e=d.heading;361==e?d.heading="Unknown":b.setRotationAngle(e);a.panTo(c);module$contents$drone_maps_set_popup_text(b,d)}
function module$contents$drone_maps_create_trajectory_slider(a,b,d){let c=b.lat_lon_list,e=b.heading_list,g=b.altitude_list,f=b.speed_list,k=b.flight_num,m=L.marker(c[c.length-1],{icon:d}).addTo(a),h=document.createElement("input");h.type="range";h.min=0;h.max=b.lat_lon_list.length-1;h.id="flight-"+k+"-slider";h.oninput=()=>{const l=parseInt(h.value,10);module$contents$drone_maps_update_marker(a,m,{lat_lon:c[l],heading:e[l],altitude:g[l],speed:f[l],flight_num:k})};h.value=h.max;h.style.position="fixed";
h.style.bottom="10px";h.style.left="10%";h.style.zIndex="1000";return h}function module$contents$drone_maps_create_trajectory(a,b,d,c){L.polyline(c.lat_lon_list,{color:b,opacity:.8}).addTo(a);a=module$contents$drone_maps_create_trajectory_slider(a,c,d);document.getElementById("live-map-slider-div").appendChild(a)}module$exports$drone_maps.create_trajectory=module$contents$drone_maps_create_trajectory;var module$exports$helpers={};function module$contents$helpers_getFormattedTimestampNow(){var a=new Date;const b=a.getFullYear(),d=(a.getMonth()+1).toString().padStart(2,"0"),c=a.getDate().toString().padStart(2,"0"),e=a.getHours().toString().padStart(2,"0"),g=a.getMinutes().toString().padStart(2,"0"),f=a.getSeconds().toString().padStart(2,"0");a=a.getMilliseconds().toString().padStart(3,"0");return`${b}-${d}-${c} ${e}:${g}:${f}.${a}`}module$exports$helpers.getFormattedTimestampNow=module$contents$helpers_getFormattedTimestampNow;var module$exports$flight_information={};let module$contents$flight_information_DroneIconClass=L.Icon.extend({options:{iconSize:[100,100],iconAnchor:[50,50],popupAnchor:[0,-25],rotationOrigin:"center center"}});
function module$contents$flight_information_populate_flight_information(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var a=document.getElementById("flight-information-table");if(null===a)console.log("div with id: flight-information-table does not exist on this page.");else{var b=(new URLSearchParams(window.location.search)).get("src_addr"),d=(new URLSearchParams(window.location.search)).get("start_time");null!==b&&null!==d||console.error("No flight information provided");var c=
(new URLSearchParams(window.location.search)).get("flight_num");null===c&&(console.error("No flight number provided"),c=0);var e=new Headers;e.set("Flight-Number",c);e.set("Source-Address",b);e.set("Start-Time",d);e.set("Limit","1000");b=module$contents$helpers_getFormattedTimestampNow();e.set("Latest-Timestamp",b);e=new Request("/wp-json/drones/v1/data",{method:"GET",headers:e});b=null;try{b=yield fetch(e)}catch(f){f.toString().includes("404")&&(a.innerHTML="No data found for flight"),console.error("Error retrieving data for flight",
f)}e=yield b.json();if(0==e.data.length)a.innerHTML="No data found for flight",console.error("No data found for flight",c);else{a=[];for(c=0;c<e.data.length;c++)a.push([e.data[c].lat,e.data[c].lon]);c=L.map("flight-map").setView(a[0],13);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(c);console.log("lat_lon_list:",a);L.polyline(a,{color:"blue",opacity:.8}).addTo(c);console.log("lat_lon_list[0]:",a[0]);b=new module$contents$flight_information_DroneIconClass({iconUrl:"https://cursedindustries.com/images/drone_marker_icon_red.png"});
b=L.marker(a[a.length-1],{icon:b}).addTo(c);b.bindPopup(`UAS ID: ${e.data[e.data.length-1].unique_id} <br> Latitude: ${e.data[e.data.length-1].lat} <br> Longitude: ${e.data[e.data.length-1].lon}`);b.setRotationAngle(e.data[e.data.length-1].heading);c.panTo(a[a.length-1]);a=document.getElementById("flight-information-table");a.setAttribute("style","overflow-x: scroll; height: 500px; position: relative; overflow-y: scroll;");a.innerHTML="";var g=document.createElement("table");c=g.createTHead().insertRow();
c.setAttribute("style","background-color: #00aa00; color: black; position: sticky; top: 0;");c.insertCell().innerHTML="UAS ID";c.insertCell().innerHTML="Timestamp";c.insertCell().innerHTML="Heading";c.insertCell().innerHTML="Ground Speed";c.insertCell().innerHTML="Vertical Speed";c.insertCell().innerHTML="Latitude";c.insertCell().innerHTML="Longitude";c.insertCell().innerHTML="Altitude";e.data.forEach(f=>{const k=g.insertRow();k.insertCell().innerHTML=f.unique_id;k.insertCell().innerHTML=module$contents$database_tables_format_timestamp(f.timestamp);
k.insertCell().innerHTML=module$contents$database_tables_format_heading(f.heading);k.insertCell().innerHTML=module$contents$database_tables_format_speed(f.gnd_speed);k.insertCell().innerHTML=module$contents$database_tables_format_speed(f.vert_speed);k.insertCell().innerHTML=module$contents$database_tables_format_latitude(f.lat);k.insertCell().innerHTML=module$contents$database_tables_format_longitude(f.lon);k.insertCell().innerHTML=module$contents$database_tables_format_altitude(f.geoAlt)});a.appendChild(g);
a=document.getElementsByClassName("time-slider");for(c=0;c<a.length;c++)a[c].style.display="none";a=document.getElementsByClassName("flight-selector");for(c=0;c<a.length;c++)a[c].style.display="none";a=document.getElementsByClassName("time-reset-button");for(c=0;c<a.length;c++)a[c].style.display="none"}}})}module$contents$flight_information_populate_flight_information();var module$exports$header={};function module$contents$header_adjustHeader(){const a=document.querySelector(".header-main-layout-1"),b=document.querySelector(".site-content");a&&b&&(b.style.paddingTop=a.offsetHeight+"px")}window.addEventListener("load",module$contents$header_adjustHeader);window.addEventListener("resize",module$contents$header_adjustHeader);var module$exports$live_map={},module$contents$live_map_red_color="#ff3131",module$contents$live_map_orange_color="#ff914d",module$contents$live_map_yellow_color="#ffbd59",module$contents$live_map_green_color="#00bf63",module$contents$live_map_cyan_color="#0cc0df",module$contents$live_map_lilac_color="#5271ff",module$contents$live_map_pink_color="#ff66c4",module$contents$live_map_trajectory_colors=[module$contents$live_map_red_color,module$contents$live_map_orange_color,module$contents$live_map_yellow_color,
module$contents$live_map_green_color,module$contents$live_map_cyan_color,module$contents$live_map_lilac_color,module$contents$live_map_pink_color];function module$contents$live_map_refresh_live_data(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){var a=null;try{a=yield fetch("https://cursedindustries.com/wp-json/drones/v1/last_6_hours_of_flights")}catch(b){console.error("Error fetching data:",b)}a=yield a.json();a.error&&console.error(a.error);return a.data})}
function module$contents$live_map_plot_trajectory(a,b){return L.polyline(b,{color:module$contents$live_map_trajectory_colors[Math.floor(Math.random()*module$contents$live_map_trajectory_colors.length)],opacity:.8}).addTo(a)}
function module$contents$live_map_refresh_trajectories(a,b,d,c){let e=[];for(let k=0;k<b.length;k++){var g=b[k],f=g.flight_num;if(0===d||f===d){f=[];for(let m=0;m<g.lat_lon_list.length;m++)g.unix_epoch_timestamp_list[m]<=c&&f.push(g.lat_lon_list[m]);g=module$contents$live_map_plot_trajectory(a,f);e.push(g)}}return e}
function module$contents$live_map_create_live_map(){var a=document.getElementById("live-map");if(null!==a){var b=L.map("live-map",{center:[40.03,-105.1],zoom:14});L.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:1,maxZoom:19,zoomSnap:.25,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(b);var d=module$contents$live_map_refresh_live_data(),c=a.parentElement;a=c.getElementsByClassName("time-controls");var e=c.getElementsByClassName("flight-controls")[0].getElementsByClassName("flight-selector")[0];
c=document.createElement("option");c.value=0;c.text="All recent flights";for(c=0;c<d.length;c++){var g=d[c];let h=g.flight_num,l=g.start_time;g=g.uas_id;let n=document.createElement("option");n.value=h;n.text=`UAS ID: ${g}, Started: ${l}`;e.add(n)}var f=a[0].getElementsByClassName("time-slider")[0];module$contents$live_map_refresh_trajectories(b,d,e.value,f.value);var k=new Date;c=Math.floor(k/1E3/60);f.type="range";f.min=c-360;f.max=c;f.value=f.max;setInterval(()=>{if(parseInt(f.value,10)===parseInt(f.max,
10)){const h=Math.floor(new Date/1E3/60);f.max=h;f.min-h-360;f.value=f.max}},6E4);var m=a[0].getElementsByClassName("time-popup")[0];f.addEventListener("input",function(){var h=parseInt(f.value,10),l=k-new Date(6E4*h);0>l&&(l=0);h=Math.floor(l/1E3/60/60);l=Math.floor(l/1E3/60)%60;m.textContent=`${h} ${1===h?"hour":"hours"} ${l} ${1===l?"minute":"minutes"} ago`;m.style.display="block"});f.addEventListener("change",function(){m.style.display="none";module$contents$live_map_refresh_trajectories(b,d,
e.value,f.value)});a=a[0].getElementsByClassName("time-reset-button")[0];a.addEventListener("click",function(){const h=Math.floor(new Date/1E3/60);f.max=h;f.min=h-360;f.value=f.max;d=module$contents$live_map_refresh_live_data();module$contents$live_map_refresh_trajectories(b,d,e.value,f.value)});a.addEventListener("mouseup",function(){this.blur()});return b}}
var module$contents$live_map_live_map=module$contents$live_map_create_live_map(),module$contents$live_map_DroneIconClass=L.Icon.extend({options:{iconSize:[100,100],iconAnchor:[50,50],popupAnchor:[0,-25],rotationOrigin:"center center"}}),module$contents$live_map_red_icon=new module$contents$live_map_DroneIconClass({iconUrl:"https://cursedindustries.com/images/drone_marker_icon_red.png"}),module$contents$live_map_orange_icon=new module$contents$live_map_DroneIconClass({iconUrl:"https://cursedindustries.com/images/drone_marker_icon_orange.png"}),
module$contents$live_map_yellow_icon=new module$contents$live_map_DroneIconClass({iconUrl:"https://cursedindustries.com/images/drone_marker_icon_yellow.png"}),module$contents$live_map_green_icon=new module$contents$live_map_DroneIconClass({iconUrl:"https://cursedindustries.com/images/drone_marker_icon_green.png"}),module$contents$live_map_cyan_icon=new module$contents$live_map_DroneIconClass({iconUrl:"https://cursedindustries.com/images/drone_marker_icon_cyan.png"}),module$contents$live_map_lilac_icon=
new module$contents$live_map_DroneIconClass({iconUrl:"https://cursedindustries.com/images/drone_marker_icon_lilac.png"}),module$contents$live_map_pink_icon=new module$contents$live_map_DroneIconClass({iconUrl:"https://cursedindustries.com/images/drone_marker_icon_pink.png"}),module$contents$live_map_red_marker=L.marker([40.03,-105.1],{icon:module$contents$live_map_red_icon}).addTo(module$contents$live_map_live_map).bindPopup("I'm a red drone moving at 50 m/s!"),module$contents$live_map_orange_marker=
L.marker([40.04,-105.1],{icon:module$contents$live_map_orange_icon}).addTo(module$contents$live_map_live_map).bindPopup("I'm an orange drone!"),module$contents$live_map_yellow_marker=L.marker([40.05,-105.1],{icon:module$contents$live_map_yellow_icon}).addTo(module$contents$live_map_live_map).bindPopup("I'm a yellow drone!"),module$contents$live_map_green_marker=L.marker([40.06,-105.1],{icon:module$contents$live_map_green_icon}).addTo(module$contents$live_map_live_map).bindPopup("I'm a green drone!"),
module$contents$live_map_cyan_marker=L.marker([40.07,-105.1],{icon:module$contents$live_map_cyan_icon}).addTo(module$contents$live_map_live_map).bindPopup("I'm a blue drone!"),module$contents$live_map_lilac_marker=L.marker([40.08,-105.1],{icon:module$contents$live_map_lilac_icon}).addTo(module$contents$live_map_live_map).bindPopup("I'm a purple drone!"),module$contents$live_map_purple_marker=L.marker([40.09,-105.1],{icon:module$contents$live_map_pink_icon}).addTo(module$contents$live_map_live_map).bindPopup("I'm a pink drone!");
module$exports$live_map.icons=[module$contents$live_map_red_icon,module$contents$live_map_orange_icon,module$contents$live_map_yellow_icon,module$contents$live_map_green_icon,module$contents$live_map_cyan_icon,module$contents$live_map_lilac_icon,module$contents$live_map_pink_icon];module$contents$live_map_red_marker.setRotationAngle(45);module$contents$live_map_orange_marker.setRotationAngle(90);module$contents$live_map_yellow_marker.setRotationAngle(135);module$contents$live_map_green_marker.setRotationAngle(180);
module$contents$live_map_cyan_marker.setRotationAngle(225);module$contents$live_map_lilac_marker.setRotationAngle(270);module$contents$live_map_purple_marker.setRotationAngle(315);var module$contents$live_map_red_drone_path_lat_lon=[[43.022,-103.2],[42.023,-104.3],[41.0278,-102.4],[41.031,-104.5],[40.035,-104.87],[40.03,-105.1]],module$contents$live_map_red_polyline=L.polyline(module$contents$live_map_red_drone_path_lat_lon,{color:"#ff3131",opacity:.8}).addTo(module$contents$live_map_live_map);
function module$contents$live_map_rest_api_trajectory(){return $jscomp.asyncExecutePromiseGeneratorFunction(function*(){try{var a=new Headers;a.append("Source-Address","MAC-60:60:1F:DF:3F:C1");a.append("Limit",100);var b=Date.now();let d=(new Date(b)).toISOString();d=d.replace("T"," ").replace("Z","").substring(0,23);a.append("Latest-Timestamp",d);b=200;let c=[],e=[],g=[],f=[],k=null,m=null,h=null,l=null,n=null,p=null,t=null,u=null;for(;200==b;){k=new Request("https://cursedindustries.com/wp-json/drones/v1/data",
{method:"GET",headers:a});try{m=yield fetch(k)}catch(r){console.error("Fetch error: ",r)}try{h=yield m.json()}catch(r){console.error("JSON error: ",r);break}b=m.status;switch(b){case 200:l=h.data[h.data.length-1];d=l.timestamp;a.set("Latest-Timestamp",d);let r;n=null!=(r=l.heading)?r:"Unknown";let v;p=null!=(v=l.gnd_speed)?v:"Unknown";let w;t=null!=(w=l.unique_id)?w:"Unknown";let x;u=null!=(x=l.flight_num)?x:0;for(let q=0;q<h.data.length;q++)c.push([h.data[q].lat,h.data[q].lon]),e.push(h.data[q].heading),
g.push(h.data[q].geo_alt),f.push(h.data[q].gnd_speed);break;case 400:console.log("Bad Request:",k);break;case 404:console.log("End of data");break;case 500:console.log("Internal server error")}404!==b&&h.error&&console.error(h.error)}a={unique_id:t,speed:p,heading:n,flight_num:u,lat_lon_list:c,heading_list:e,altitude_list:g,speed_list:f};console.log("Drone stats:",a);module$contents$drone_maps_create_trajectory(module$contents$live_map_live_map,module$contents$live_map_orange_color,module$exports$live_map.icons[Math.floor(Math.random()*
module$exports$live_map.icons.length)],a)}catch(d){console.error(d)}})}module$contents$live_map_rest_api_trajectory();
